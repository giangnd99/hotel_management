databaseChangeLog:
  - changeSet:
      id: 001
      author: system
      comment: Create initial schema for voucher management system
      
      - createTable:
          tableName: voucher_packs
          columns:
            - column:
                name: id
                type: BIGINT
                autoIncrement: true
                constraints:
                  primaryKey: true
                  nullable: false
            - column:
                name: description
                type: VARCHAR(500)
                constraints:
                  nullable: false
            - column:
                name: discount_amount
                type: DECIMAL(10,2)
                constraints:
                  nullable: false
            - column:
                name: valid_range
                type: VARCHAR(50)
                constraints:
                  nullable: false
            - column:
                name: required_points
                type: BIGINT
                constraints:
                  nullable: false
            - column:
                name: quantity
                type: INTEGER
                constraints:
                  nullable: false
            - column:
                name: valid_from
                type: DATE
                constraints:
                  nullable: true
            - column:
                name: valid_to
                type: DATE
                constraints:
                  nullable: true
            - column:
                name: status
                type: VARCHAR(20)
                constraints:
                  nullable: false
                  defaultValue: PENDING
            - column:
                name: created_at
                type: TIMESTAMP
                constraints:
                  nullable: false
            - column:
                name: created_by
                type: VARCHAR(100)
                constraints:
                  nullable: false
            - column:
                name: updated_at
                type: TIMESTAMP
                constraints:
                  nullable: true
            - column:
                name: updated_by
                type: VARCHAR(100)
                constraints:
                  nullable: true
            - column:
                name: version
                type: BIGINT
                constraints:
                  nullable: false
                  defaultValue: 0

      - createTable:
          tableName: vouchers
          columns:
            - column:
                name: id
                type: VARCHAR(36)
                constraints:
                  primaryKey: true
                  nullable: false
            - column:
                name: voucher_code
                type: VARCHAR(20)
                constraints:
                  nullable: false
                  unique: true
            - column:
                name: discount_amount
                type: DECIMAL(10,2)
                constraints:
                  nullable: false
            - column:
                name: voucher_pack_id
                type: BIGINT
                constraints:
                  nullable: false
                  foreignKeyName: fk_vouchers_voucher_pack
                  references: voucher_packs(id)
            - column:
                name: customer_id
                type: VARCHAR(100)
                constraints:
                  nullable: false
            - column:
                name: redeemed_at
                type: TIMESTAMP
                constraints:
                  nullable: false
            - column:
                name: valid_to
                type: TIMESTAMP
                constraints:
                  nullable: false
            - column:
                name: status
                type: VARCHAR(20)
                constraints:
                  nullable: false
                  defaultValue: PENDING
            - column:
                name: used_at
                type: TIMESTAMP
                constraints:
                  nullable: true
            - column:
                name: created_at
                type: TIMESTAMP
                constraints:
                  nullable: false
            - column:
                name: updated_at
                type: TIMESTAMP
                constraints:
                  nullable: true
            - column:
                name: version
                type: BIGINT
                constraints:
                  nullable: false
                  defaultValue: 0
