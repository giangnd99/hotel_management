databaseChangeLog:
  - changeSet:
      id: 005
      author: system
      comment: Create Spring Batch database tables
      
      - createTable:
          tableName: BATCH_JOB_INSTANCE
          columns:
            - column:
                name: JOB_INSTANCE_ID
                type: BIGINT
                autoIncrement: true
                constraints:
                  primaryKey: true
                  nullable: false
            - column:
                name: VERSION
                type: BIGINT
                constraints:
                  nullable: true
            - column:
                name: JOB_NAME
                type: VARCHAR(512)
                constraints:
                  nullable: false
            - column:
                name: JOB_KEY
                type: VARCHAR(512)
                constraints:
                  nullable: true
      
      - createTable:
          tableName: BATCH_JOB_EXECUTION
          columns:
            - column:
                name: JOB_EXECUTION_ID
                type: BIGINT
                autoIncrement: true
                constraints:
                  primaryKey: true
                  nullable: false
            - column:
                name: VERSION
                type: BIGINT
                constraints:
                  nullable: true
            - column:
                name: JOB_INSTANCE_ID
                type: BIGINT
                constraints:
                  nullable: false
                  foreignKeyName: FK_JOB_EXECUTION_JOB_INSTANCE
                  references: BATCH_JOB_INSTANCE(JOB_INSTANCE_ID)
            - column:
                name: CREATE_TIME
                type: TIMESTAMP
                constraints:
                  nullable: false
            - column:
                name: START_TIME
                type: TIMESTAMP
                constraints:
                  nullable: true
            - column:
                name: END_TIME
                type: TIMESTAMP
                constraints:
                  nullable: true
            - column:
                name: STATUS
                type: VARCHAR(10)
                constraints:
                  nullable: true
            - column:
                name: EXIT_CODE
                type: VARCHAR(2500)
                constraints:
                  nullable: true
            - column:
                name: EXIT_MESSAGE
                type: VARCHAR(2500)
                constraints:
                  nullable: true
            - column:
                name: LAST_UPDATED
                type: TIMESTAMP
                constraints:
                  nullable: true
      
      - createTable:
          tableName: BATCH_JOB_EXECUTION_PARAMS
          columns:
            - column:
                name: JOB_EXECUTION_ID
                type: BIGINT
                constraints:
                  nullable: false
                  foreignKeyName: FK_JOB_EXEC_PARAMS_JOB_EXECUTION
                  references: BATCH_JOB_EXECUTION(JOB_EXECUTION_ID)
            - column:
                name: PARAMETER_NAME
                type: VARCHAR(100)
                constraints:
                  nullable: false
            - column:
                name: PARAMETER_TYPE
                type: VARCHAR(100)
                constraints:
                  nullable: false
            - column:
                name: PARAMETER_VALUE
                type: VARCHAR(2500)
                constraints:
                  nullable: true
            - column:
                name: IDENTIFYING
                type: CHAR(1)
                constraints:
                  nullable: false
      
      - createTable:
          tableName: BATCH_STEP_EXECUTION
          columns:
            - column:
                name: STEP_EXECUTION_ID
                type: BIGINT
                autoIncrement: true
                constraints:
                  primaryKey: true
                  nullable: false
            - column:
                name: VERSION
                type: BIGINT
                constraints:
                  nullable: true
            - column:
                name: STEP_NAME
                type: VARCHAR(128)
                constraints:
                  nullable: false
            - column:
                name: JOB_EXECUTION_ID
                type: BIGINT
                constraints:
                  nullable: false
                  foreignKeyName: FK_STEP_EXECUTION_JOB_EXECUTION
                  references: BATCH_JOB_EXECUTION(JOB_EXECUTION_ID)
            - column:
                name: CREATE_TIME
                type: TIMESTAMP
                constraints:
                  nullable: false
            - column:
                name: START_TIME
                type: TIMESTAMP
                constraints:
                  nullable: true
            - column:
                name: END_TIME
                type: TIMESTAMP
                constraints:
                  nullable: true
            - column:
                name: STATUS
                type: VARCHAR(10)
                constraints:
                  nullable: true
            - column:
                name: COMMIT_COUNT
                type: BIGINT
                constraints:
                  nullable: true
            - column:
                name: READ_COUNT
                type: BIGINT
                constraints:
                  nullable: true
            - column:
                name: FILTER_COUNT
                type: BIGINT
                constraints:
                  nullable: true
            - column:
                name: WRITE_COUNT
                type: BIGINT
                constraints:
                  nullable: true
            - column:
                name: READ_SKIP_COUNT
                type: BIGINT
                constraints:
                  nullable: true
            - column:
                name: WRITE_SKIP_COUNT
                type: BIGINT
                constraints:
                  nullable: true
            - column:
                name: PROCESS_SKIP_COUNT
                type: BIGINT
                constraints:
                  nullable: true
            - column:
                name: ROLLBACK_COUNT
                type: BIGINT
                constraints:
                  nullable: true
            - column:
                name: EXIT_CODE
                type: VARCHAR(2500)
                constraints:
                  nullable: true
            - column:
                name: EXIT_MESSAGE
                type: VARCHAR(2500)
                constraints:
                  nullable: true
            - column:
                name: LAST_UPDATED
                type: TIMESTAMP
                constraints:
                  nullable: true
      
      - createTable:
          tableName: BATCH_STEP_EXECUTION_SEQ
          columns:
            - column:
                name: ID
                type: BIGINT
                constraints:
                  primaryKey: true
                  nullable: false
      
      - createTable:
          tableName: BATCH_JOB_EXECUTION_SEQ
          columns:
            - column:
                name: ID
                type: BIGINT
                constraints:
                  primaryKey: true
                  nullable: false
      
      - createTable:
          tableName: BATCH_JOB_INSTANCE_SEQ
          columns:
            - column:
                name: ID
                type: BIGINT
                constraints:
                  primaryKey: true
                  nullable: false
      
      - insert:
          tableName: BATCH_STEP_EXECUTION_SEQ
          columns:
            - column:
                name: ID
                value: 0
      
      - insert:
          tableName: BATCH_JOB_EXECUTION_SEQ
          columns:
            - column:
                name: ID
                value: 0
      
      - insert:
          tableName: BATCH_JOB_INSTANCE_SEQ
          columns:
            - column:
                name: ID
                value: 0
      
      - createIndex:
          tableName: BATCH_JOB_INSTANCE
          indexName: IDX_BATCH_JOB_INSTANCE_JOB_KEY
          columns:
            - column:
                name: JOB_KEY
      
      - createIndex:
          tableName: BATCH_JOB_INSTANCE
          indexName: IDX_BATCH_JOB_INSTANCE_JOB_NAME
          columns:
            - column:
                name: JOB_NAME
      
      - createIndex:
          tableName: BATCH_JOB_EXECUTION
          indexName: IDX_BATCH_JOB_EXECUTION_JOB_INSTANCE_ID
          columns:
            - column:
                name: JOB_INSTANCE_ID
      
      - createIndex:
          tableName: BATCH_JOB_EXECUTION
          indexName: IDX_BATCH_JOB_EXECUTION_STATUS
          columns:
            - column:
                name: STATUS
      
      - createIndex:
          tableName: BATCH_STEP_EXECUTION
          indexName: IDX_BATCH_STEP_EXECUTION_JOB_EXECUTION_ID
          columns:
            - column:
                name: JOB_EXECUTION_ID
      
      - createIndex:
          tableName: BATCH_STEP_EXECUTION
          indexName: IDX_BATCH_STEP_EXECUTION_STEP_NAME
          columns:
            - column:
                name: STEP_NAME
